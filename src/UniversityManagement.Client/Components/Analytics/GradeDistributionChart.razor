@* Grade Distribution Bar Chart Component *@
@using ApexCharts

<MudPaper Elevation="2" Class="pa-4">
    <MudText Typo="Typo.h6" Class="mb-4">Grade Distribution</MudText>
    
    @if (IsLoading)
    {
        <MudProgressLinear Color="Color.Primary" Indeterminate="true" />
    }
    else if (ChartData == null || !ChartData.Any())
    {
        <MudAlert Severity="Severity.Info">No grade data available yet.</MudAlert>
    }
    else
    {
        <ApexChart TItem="GradeDistributionDataPoint"
                   Title="Grades by Category"
                   Height="300">
            
            <ApexPointSeries TItem="GradeDistributionDataPoint"
                             Items="ChartData"
                             Name="Number of Grades"
                             SeriesType="SeriesType.Bar"
                             XValue="@(e => e.GradeCategory)"
                             YValue="@(e => (decimal)e.Count)"
                             Color="#00E396" />
        </ApexChart>
    }
</MudPaper>

@code {
    [Parameter]
    public List<GradeDistributionDataPoint>? ChartData { get; set; }
    
    [Parameter]
    public bool IsLoading { get; set; }
    
    public class GradeDistributionDataPoint
    {
        public string GradeCategory { get; set; } = string.Empty;
        public int Count { get; set; }
    }
}
